<html lang="en"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabel Ranking</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
    <div class="container">
        <table class="table">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Nama</th>
                    <th>Agama</th>
                    <th>Matematika</th>
                    <th>IPA</th>
                    <th>Rata-rata</th>
                </tr>
            </thead>
            <tbody id="data">
    <tr key="1">
        <td>1</td>
        <td>Isa</td>
        <td>85</td>
        <td>90</td>
        <td>75</td>
        <td><span class="average" style="display: none">80.00</span></td>
    </tr>
    
    <tr key="2">
        <td>2</td>
        <td>Hafiizh</td>
        <td>80</td>
        <td>75</td>
        <td>80</td>
        <td><span class="average" style="display: none">90.00</span></td>
    </tr>
    
    <tr key="3">
        <td>3</td>
        <td>Raya</td>
        <td>80</td>
        <td>70</td>
        <td>60</td>
        <td><span class="average" style="display: none">82.67</span></td>
    </tr>
    
    <tr key="4">
        <td>4</td>
        <td>Syaiful</td>
        <td>75</td>
        <td>70</td>
        <td>75</td>
        <td><span class="average" style="display: none">73.33</span></td>
    </tr>
    
    <tr key="5">
        <td>5</td>
        <td>Sakhi</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td><span class="average" style="display: none">81.67</span></td>
    </tr>
    </tbody>
        </table>
        <button type="button" class="btn btn-primary" id="btnAverage">Hitung Rata-rata</button>
        <button type="button" class="btn btn-success" id="btnJuara">Cari Juara</button>
    </div>



<script>
    let students = [
        {
            id: 1,
            nisn: 11111,
            name: "Isa",
            Agama: 85,
            Matematika: 90,
            IPA: 75
    },
    {
            id: 2,
            nisn: 22222,
            name: "Hafiizh",
            Agama: 80,
            Matematika: 75,
            IPA: 80
    },        {
            id: 3,
            nisn: 33333,
            name: "Raya",
            Agama: 80,
            Matematika: 70,
            IPA: 60
    },
    {
            id: 4,
            nisn: 44444,
            name: "Syaiful",
            Agama: 75,
            Matematika: 70,
            IPA: 75
    },
    {

            id: 5,
            nisn: 55555,
            name: "Sakhi",
            Agama: 100,
            Matematika: 100,
            IPA: 100
    },        
            
    
];

let ele = [];
let totalAverage = []; 

students[0]

students.map(function(student, key){
    
    student.rerata = ((student.Agama + student.Matematika + student.IPA)/3).toFixed(2);
    ele +=  `
    <tr key="${student.id}">
        <td>${key+1}</td>
        <td>${student.name}</td>
        <td>${student.Agama}</td>
        <td>${student.Matematika}</td>
        <td>${student.IPA}</td>
        <td><span class="average" style="display: none">${student.rerata}</span></td>
    </tr>
    `;

    totalAverage.push(parseFloat(student.rerata));

});

console.log(totalAverage);

document.getElementById("data").innerHTML = ele;


document.getElementById("btnAverage").addEventListener("click", function(){
    
    console.log(document.getElementsByClassName("average"));
    for(let i = 0; i<document.getElementsByClassName("average").length;i++){
    document.getElementsByClassName("average")[i].style.display = "block";
}});

document.getElementById("btnJuara").addEventListener("click", function(){
    for(let i = 0; i<document.getElementsByClassName("average").length;i++){
    if(document.getElementsByClassName("average")[i].innerText == Math.max(...totalAverage)){
        document.getElementsByClassName("average")[i].parentElement.parentElement.style.backgroundColor="orange";
        document.getElementsByClassName("average")[i].parentElement.parentElement.style.fontweight="bold";
    }
    }
});

</script>

</body></html>